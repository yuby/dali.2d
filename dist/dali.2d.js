!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dali2d=e():t.dali2d=e()}(this,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=20)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},function(t,e,o){var n=o(9),r=o(10);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e){function o(e){return t.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},o(e)}t.exports=o},function(t,e,o){var n=o(11);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,o){var n,r,i=o(12),a=o(13),l=0,u=0;t.exports=function(t,e,o){var c=e&&o||0,s=e||[],f=(t=t||{}).node||n,h=void 0!==t.clockseq?t.clockseq:r;if(null==f||null==h){var v=i();null==f&&(f=n=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==h&&(h=r=16383&(v[6]<<8|v[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:u+1,g=d-l+(p-u)/1e4;if(g<0&&void 0===t.clockseq&&(h=h+1&16383),(g<0||d>l)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=d,u=p,r=h;var y=(1e4*(268435455&(d+=122192928e5))+p)%4294967296;s[c++]=y>>>24&255,s[c++]=y>>>16&255,s[c++]=y>>>8&255,s[c++]=255&y;var b=d/4294967296*1e4&268435455;s[c++]=b>>>8&255,s[c++]=255&b,s[c++]=b>>>24&15|16,s[c++]=b>>>16&255,s[c++]=h>>>8|128,s[c++]=255&h;for(var m=0;m<6;++m)s[c+m]=f[m];return e||a(s)}},function(t,e,o){var n=o(17),r=o(18),i=o(19);t.exports=function(t,e){return n(t)||r(t,e)||i()}},function(t,e,o){t.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.r(e);var r=function(t){return Object.prototype.toString.call(t)},i=function(t){var e=!1,o=null,i=0,a={},l={mouseDragStart:function(t){a.dragStart&&a.dragStart.forEach(function(e){return e(o.getMousePosition(t))})},mouseDrag:function(t){1===i&&l.mouseDragStart(t),a.drag&&a.drag.forEach(function(e){return e(o.getMousePosition(t))}),i+=1,e=!0},mouseDragEnd:function(t){a.dragEnd&&a.dragEnd.forEach(function(e){return e(o.getMousePosition(t))})},mouseClick:function(t){a.click&&a.click.forEach(function(e){return e(o.getMousePosition(t))})},mouseDBClick:function(t){a.dbclick&&a.dbclick.forEach(function(e){return e(o.getMousePosition(t))})},mouseRightClick:function(t){a.rightClick&&a.rightClick.forEach(function(e){return e(o.getMousePosition(t))}),i=0},mouseWheel:function(t){a.wheel&&a.wheel.forEach(function(e){return e(t)})},mouseDown:function(t,e){t.preventDefault(),i+=1,e.addEventListener("mousemove",l.mouseDrag)}},u=function(){function t(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"[object String]"===r(n)?this.element=document.querySelector(n):this.element=n,function(){var t=this;this.element.oncontextmenu=function(t){return a.rightClick&&3===t.which&&l.mouseRightClick(t),!1},this.element.addEventListener("mousedown",function(e){l.mouseDown(e,t.element)}),this.element.addEventListener("mouseup",function(o){o.preventDefault(),t.element.removeEventListener("mousemove",l.mouseDrag),t.element.removeEventListener("mousedown",l.mouseDown),e&&(l.mouseDragEnd(o),t.element.removeEventListener("mousemove",l.mouseDrag),e=!1),setTimeout(function(){1===i&&3!==o.which?l.mouseClick(o):2===i&&3!==o.which&&l.mouseDBClick(o),i=0},100)}),this.element.addEventListener("wheel",function(t){setTimeout(function(){l.mouseWheel&&l.mouseWheel(t)},1)})}.call(this),o=function(){var t=this.element,e=t.getBoundingClientRect(),o=e.left*(t.offsetWidth/e.width),n=e.top*(t.offsetHeight/e.height);return{getMousePosition:function(t){var e=t.pageX-o,r=t.pageY-n;return Object.assign(t,{canvasX:e,canvasY:r}),t}}}.call(this)}return function(t,e,o){e&&n(t.prototype,e)}(t,[{key:"on",value:function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];return Object.assign(a,function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},t,o)),this}}]),t}();return Object.assign(u.prototype,{getEvent:function(t){return a[t]?a[t]:[]}}),new u(t)},a="undefined"==typeof window?self:window;a.simpleEvent=i,a.$$=i,e.default=i}])},function(t,e,o){var n=o(14),r=o(15),i=o(16);t.exports=function(t){return n(t)||r(t)||i()}},function(t,e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?t.exports=n=function(t){return o(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function o(e,n){return t.exports=o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(e,n)}t.exports=o},function(t,e){var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(o){var n=new Uint8Array(16);t.exports=function(){return o(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=o;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return o}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,o){"use strict";o.r(e);var n=o(0),r=o.n(n),i=o(1),a=o.n(i),l=o(7),u=o.n(l),c=o(2),s=o.n(c),f=o(3),h=o.n(f),v=o(4),d=o.n(v),p=o(5),g=o.n(p),y=o(8),b=o.n(y),m=function(){function t(e){r()(this,t),this.props=b()(e)}return a()(t,[{key:"getID",value:function(){return this.uuid}},{key:"draw",value:function(){throw new Error("draw override")}},{key:"setStyle",value:function(){throw new Error("style override")}}]),t}(),k=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="arc-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length,r="";e.beginPath();for(var i=0;i<n;i+=1){var a=o[i],l=a.points,u=a.radius,c=void 0===u?10:u,s=a.bgColor,f=a.color,h=a.lineWidth,v=a.startAngle,d=void 0===v?0:v,p=a.endAngle,g=void 0===p?2*Math.PI:p,y={color:f,bgColor:s,lineWidth:h,opacity:a.opacity},b=Object.values(y).toString(),m=r===b,k=i===n-1,x=l.length;m||(0!==i&&(e.stroke(),e.fill()),e.beginPath(),t.setStyle(y));for(var w=0;w<x;w+=1){var S=l[w];e.moveTo(Math.trunc(S[0]+c),Math.trunc(S[1])),e.arc(Math.trunc(S[0]),Math.trunc(S[1]),c,d,g)}r=b,m&&k?(e.stroke(),e.fill()):k&&(e.stroke(),e.fill())}}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),x=o(6),w=o.n(x),S=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="rect-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length,r="",i=0;if(0!==n)for(e.beginPath();i<n;i+=1){var a=o[i],l=a.points,u=a.width,c=void 0===u?10:u,s=a.height,f=void 0===s?10:s,h=a.bgColor,v={color:a.color,bgColor:h,lineWidth:a.lineWidth,opacity:a.opacity},d=l.length,p=Object.values(v).toString(),g=r===p,y=i===n-1;g||(0!==i&&e.stroke(),e.beginPath(),t.setStyle(v));for(var b=0;b<d;b+=1){var m=l[b],k=w()(m,2),x=k[0],S=k[1],C=Math.trunc(x),M=Math.trunc(S);0===b&&e.moveTo(C,M),e.rect(C,M,c,f)}r=p,g&&y?(e.stroke(),e.fill()):y&&(e.stroke(),e.fill())}}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),C={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},M=function(t){var e=t.context,o=t.props,n=o.length,r="";if(0!==n){e.beginPath();for(var i=function(i){var a=o[i],l=a.points,u=a.color,c=a.arrow,s=a.lineType,f=a.opacity,h=a.lineWidth,v=void 0===h?1:h,d=a.isClose,p=void 0!==d&&d,g=l.length,y="".concat(u||"-").concat(v||"-").concat(s||"-"),b=r===y,m=i===n-1,k={color:u,lineWidth:v,opacity:f};b||(0!==i&&e.stroke(),e.beginPath(),t.setStyle(k),C[s]?e.setLineDash(C[s].map(function(t){return t*v})):e.setLineDash(C.solid));for(var x=0;x<g;x+=1){var w=l[x];0===x&&e.moveTo(Math.trunc(w[0]),Math.trunc(w[1])),e.lineTo(Math.trunc(w[0]),Math.trunc(w[1]))}if(r=y,c){var S=l[g-2],M=l[g-1];!function(t,e,o,n){var r,i,a=e[0],l=e[1],u=o[0],c=o[1],s=1===n?4:2*n,f=Math.atan2(c-l,u-a);t.moveTo(u,c),f+=2*Math.PI*.4,r=1.2*s*Math.cos(f)+u,i=1.2*s*Math.sin(f)+c,t.lineTo(r,i),f+=2*Math.PI*.2,r=1.2*s*Math.cos(f)+u,i=1.2*s*Math.sin(f)+c,t.lineTo(r,i),t.closePath()}(e,S,M,v)}b&&m?(p&&e.closePath(),e.stroke()):m&&(p&&e.closePath(),e.stroke())},a=0;a<n;a+=1)i(a)}},O=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="path-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){M(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),P={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},j=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="quadraticCurve-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length,r="";e.beginPath();for(var i=function(i){var a=o[i],l=a.points,u=a.color,c=a.lineType,s=a.opacity,f=a.lineWidth,h=void 0===f?1:f,v=a.isClose,d=void 0!==v&&v,p={color:u,lineWidth:h,opacity:s},g=Object.values(p).toString(),y=r===g,b=i===n-1,m=l.length;y||(0!==i&&e.stroke(),e.beginPath(),t.setStyle(p),P[c]?e.setLineDash(P[c].map(function(t){return t*h})):e.setLineDash(P.solid));for(var k=0;k<m;k+=1){var x=l[k],S=w()(x,6),C=S[0],M=S[1],O=S[2],j=S[3],T=S[4],W=S[5];0===k&&e.moveTo(Math.trunc(C),Math.trunc(M)),e.quadraticCurveTo(Math.trunc(O),Math.trunc(j),Math.trunc(T),Math.trunc(W))}r=g,y&&b?(d&&e.closePath(),e.stroke()):b&&(d&&e.closePath(),e.stroke())},a=0;a<n;a+=1)i(a)}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),T={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},W=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="bezierCurve-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length,r="";e.beginPath();for(var i=function(i){var a=o[i],l=a.points,u=a.color,c=a.lineType,s=a.opacity,f=a.lineWidth,h=void 0===f?1:f,v=a.isClose,d=void 0!==v&&v,p={color:u,lineWidth:h,opacity:s},g=Object.values(p).toString(),y=r===g,b=i===n-1,m=l.length;y||(0!==i&&e.stroke(),e.beginPath(),t.setStyle(p),T[c]?e.setLineDash(T[c].map(function(t){return t*h})):e.setLineDash(T.solid));for(var k=0;k<m;k+=1){var x=l[k],S=w()(x,8),C=S[0],M=S[1],O=S[2],P=S[3],j=S[4],W=S[5],E=S[6],A=S[7];0===k&&e.moveTo(Math.trunc(C),Math.trunc(M)),e.bezierCurveTo(Math.trunc(O),Math.trunc(P),Math.trunc(j),Math.trunc(W),Math.trunc(E),Math.trunc(A))}r=g,y&&b?(d&&e.closePath(),e.stroke()):b&&(d&&e.closePath(),e.stroke())},a=0;a<n;a+=1)i(a)}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),E=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="text-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){for(var e=t.context,o=t.props,n=o.length,r=0;r<n;r+=1){var i=o[r],a=i.points,l=i.text,u=i.color,c=i.bgColor,s=i.font,f=i.textAlign,h=i.textBaseline,v=i.lineWidth,d=i.lineHeight,p=i.wordBreak,g=void 0!==p&&p,y=i.rad,b={color:u,bgColor:c,font:s,textAlign:f,textBaseline:h,lineWidth:v,lineHeight:d,opacity:i.opacity},m=a.length;e.save(),e.beginPath(),t.setStyle(b),e.rotate(y||0);for(var k=0;k<m;k+=1){var x=a[k],S=w()(x,2),C=S[0],M=S[1];if(g)for(var O=l.split(" "),P=+M,j=0;j<O.length;j+=1)e.strokeText(O[j],C,P),e.fillText(O[j],C,P),P+=+d;else e.strokeText(l,C,M),e.fillText(l,C,M);e.restore()}}}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.textBaseline,n=void 0===o?"alphabetic":o,r=t.textAlign,i=void 0===r?"alphabetic":r,a=t.bgColor,l=void 0===a?"rgba(255,255,255,0)":a,u=t.color,c=void 0===u?"rgba(255,255,255,0)":u,s=t.lineWidth,f=void 0===s?0:s,h=t.globalCompositeOperation,v=void 0===h?"source-over":h,d=t.opacity,p=void 0===d?1:d,g=t.font;e.textBaseline=n,e.textAlign=i,e.font="".concat(g),e.fillStyle=l,e.strokeStyle=c,e.lineWidth=f,e.globalCompositeOperation=v,e.globalAlpha=p}}]),e}(m),A={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},D=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="polygon-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length,r="";e.beginPath();for(var i=function(i){var a=o[i],l=a.points,u=a.color,c=a.bgColor,s=a.globalCompositeOperation,f=a.lineWidth,h=a.lineType,v=a.holes,d=a.isClose,p=void 0===d||d,g=a.opacity,y={color:u,bgColor:c,lineWidth:f,globalCompositeOperation:s,opacity:g},b=l.length,m="".concat(u||"").concat(c||"").concat(f||"").concat(h||""),k=m===r,x=i===n-1;k||(0!==i&&(e.stroke(),e.fill()),e.beginPath(),t.setStyle(Object.assign(y,{isClose:p})),A[h]?e.setLineDash(A[h].map(function(t){return t*f})):e.setLineDash(A.solid));for(var w=0;w<b;w+=1){var S=l[w];0===w&&e.moveTo(Math.trunc(S[0]),Math.trunc(S[1])),e.lineTo(Math.trunc(S[0]),Math.trunc(S[1]))}if(p&&e.closePath(),v&&v.length>0)for(var C=v.length,M=0;M<C;M+=1){for(var O=v[M],P=O.length,j=0;j<P;j+=1){var T=O[j];0===j&&e.moveTo(Math.trunc(T[0]),Math.trunc(T[1])),e.lineTo(Math.trunc(T[0]),Math.trunc(T[1]))}e.closePath()}x?(e.stroke(),e.fill(),e.restore()):k||(e.stroke(),e.fill(),r=m,e.beginPath())},a=0;a<n;a+=1)i(a)}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=t.color,r=void 0===n?"rgba(255,255,255,0)":n,i=t.lineWidth,a=void 0===i?1:i,l=t.globalCompositeOperation,u=void 0===l?"source-over":l,c=t.opacity,s=void 0===c?1:c,f=t.isClose;e.fillStyle=f&&o?o:"rgba(255,255,255,0)",e.strokeStyle=r,e.lineWidth=a,e.globalCompositeOperation=u,e.globalAlpha=s}}]),e}(m),_=function(t,e,o){var n=e.map(function(){return 0});n=function(t,e,o){for(var n=t.length-1,r=function(t,e){for(var o=[],n=0;n<t;n++){o.push([]);for(var r=0;r<e;r++)o[n].push(0)}return o}(n+1,n+2),i=1;i<n;i++)r[i][i-1]=1/(t[i]-t[i-1]),r[i][i]=2*(1/(t[i]-t[i-1])+1/(t[i+1]-t[i])),r[i][i+1]=1/(t[i+1]-t[i]),r[i][n+1]=3*((e[i]-e[i-1])/((t[i]-t[i-1])*(t[i]-t[i-1]))+(e[i+1]-e[i])/((t[i+1]-t[i])*(t[i+1]-t[i])));return r[0][0]=2/(t[1]-t[0]),r[0][1]=1/(t[1]-t[0]),r[0][n+1]=3*(e[1]-e[0])/((t[1]-t[0])*(t[1]-t[0])),r[n][n-1]=1/(t[n]-t[n-1]),r[n][n]=2/(t[n]-t[n-1]),r[n][n+1]=3*(e[n]-e[n-1])/((t[n]-t[n-1])*(t[n]-t[n-1])),function(t,e){for(var o=t.length,n=0;n<o;n++){for(var r=0,i=Number.NEGATIVE_INFINITY,a=n;a<o;a++)t[a][n]>i&&(r=a,i=t[a][n]);L(t,n,r);for(var a=n+1;a<o;a++){for(var l=n+1;l<o+1;l++)t[a][l]=t[a][l]-t[n][l]*(t[a][n]/t[n][n]);t[a][n]=0}}for(var a=o-1;a>=0;a--){var u=t[a][o]/t[a][a];e[a]=u;for(var l=a-1;l>=0;l--)t[l][o]-=t[l][a]*u,t[l][a]=0}return e}(r,o)}(e,o,n);for(var r=1;e[r]<t;)r++;var i=(t-e[r-1])/(e[r]-e[r-1]),a=n[r-1]*(e[r]-e[r-1])-(o[r]-o[r-1]),l=-n[r]*(e[r]-e[r-1])+(o[r]-o[r-1]);return(1-i)*o[r-1]+i*o[r]+i*(1-i)*(a*(1-i)+l*i)};function L(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}var I={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},B=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="smmothCurve-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){var e=t.context,o=t.props,n=o.length;if(0!==n){e.beginPath();for(var r=function(n){var r=o[n],i=r.points,a=r.color,l=r.lineType,u=r.opacity,c=r.resolution,s=void 0===c?1:c,f=r.lineWidth,h=void 0===f?1:f,v={color:a,lineWidth:h,opacity:u};e.beginPath(),t.setStyle(v),I[l]?e.setLineDash(I[l].map(function(t){return t*h})):e.setLineDash(I.solid);var d=i[0],p=i[i.length-1],g=i.map(function(t){return Math.trunc(t[0])}),y=i.map(function(t){return Math.trunc(t[1])});e.moveTo(Math.trunc(d[0]),Math.trunc(d[1]));for(var b=d[0];b<=p[0];b+=s)e.lineTo(b,_(b,g,y));e.lineTo(p[0],_(p[0],g,y)),e.stroke()},i=0;i<n;i+=1)r(i)}}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),R=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="image-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){for(var e=t.context,o=t.props,n=o.length,r=0;r<n;r+=1)for(var i=o[r],a=i.points,l=i.image,u=i.width,c=i.height,s=i.offsetX,f=void 0===s?0:s,h=i.offsetY,v=void 0===h?0:h,d=a.length,p=0;p<d;p+=1){var g=a[p],y=w()(g,2),b=y[0],m=y[1],k=Math.trunc(b),x=Math.trunc(m),S=u||l.width,C=c||l.height;e.drawImage(l,k+f,x+v,S,C)}}(this)}}]),e}(m),H=function(t){function e(t){var o;return r()(this,e),(o=s()(this,h()(e).call(this,t))).uuid="arrow-".concat(g()()),o}return d()(e,t),a()(e,[{key:"draw",value:function(){!function(t){for(var e=t.context,o=t.props,n=o.length,r="",i=0;i<n;i+=1){var a=o[i],l=a.points,u=a.color,c=a.angle,s=void 0===c?0:c,f=a.lineWidth,h=a.bgColor,v=f?f+2:3,d=l.length,p={bgColor:h,color:u,lineWidth:f},g=Object.values(p).toString(),y=r===g,b=i===n-1;y||(0!==i&&(e.stroke(),e.fill()),e.beginPath(),t.setStyle(p));for(var m=0;m<d;m+=1){var k=(s-90)*(Math.PI/180),x=l[m],w=x[0],S=x[1];e.moveTo(w,S),k+=2*Math.PI*.4;var C=1.2*v*Math.cos(k)+w,M=1.2*v*Math.sin(k)+S;e.lineTo(C,M),k+=2*Math.PI*.2;var O=1.2*v*Math.cos(k)+w,P=1.2*v*Math.sin(k)+S;e.lineTo(O,P),e.closePath()}r=g,y&&b?(e.stroke(),e.fill()):b&&(e.stroke(),e.fill())}}(this)}},{key:"setStyle",value:function(t){var e=this.context,o=t.bgColor,n=void 0===o?"rgba(255,255,255,0)":o,r=t.color,i=void 0===r?"rgba(255,255,255,0)":r,a=t.lineWidth,l=void 0===a?1:a,u=t.globalCompositeOperation,c=void 0===u?"source-over":u,s=t.opacity,f=void 0===s?1:s;e.fillStyle=n,e.strokeStyle=i,e.lineWidth=l,e.globalCompositeOperation=c,e.globalAlpha=f}}]),e}(m),q=function(t){return Object.prototype.toString.call(t)},Q=function(){function t(e,o){r()(this,t),"[object String]"===q(e)?this.canvas=document.querySelector(e):this.canvas=e,this.selector=e,this.context=this.canvas.getContext("2d"),this.zoom=0,this.selection=null,this.featureQueue=[],this.activeEvent="[object Boolean]"!==q(o)||o,this.eventHandler=null,this.activeEvent&&(this.eventHandler=u()(e))}return a()(t,[{key:"init",value:function(){this.featureQueue.forEach(function(t){t.setProperty()})}},{key:"add",value:function(t){this.featureQueue.push(t)}},{key:"draw",value:function(){var t=this.featureQueue,e=this.canvas;t.forEach(function(t){"[object Array]"===q(t)?t.forEach(function(t){Object.assign(t,{canvas:e,context:e.getContext("2d")}),t.draw()}):(Object.assign(t,{canvas:e,context:e.getContext("2d")}),t.draw())})}},{key:"clear",value:function(){var t=this.context,e=this.canvas;t.clearRect(0,0,e.width,e.height)}},{key:"delete",value:function(t){this.featureQueue=t?this.featureQueue.filter(function(e){return e.uuid!==t}):[]}},{key:"reDraw",value:function(){this.clear(),this.draw()}},{key:"on",value:function(t,e){return this.eventHandler&&this.eventHandler.on(t,e),this.eventHandler}}]),t}();Q.Arc=k,Q.Rect=S,Q.Path=O,Q.Text=E,Q.Arrow=H,Q.Image=R,Q.QuadraticCurve=j,Q.BezierCurve=W,Q.SmoothCurve=B,Q.Polygon=D,("undefined"==typeof window?self:window).Dali=Q;var V=Q;e.default=V}])});