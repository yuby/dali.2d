!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dali2d=e():t.dali2d=e()}(this,function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}},function(t,e,o){t.exports=function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function i(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}o.r(e);var n=function(t){return Object.prototype.toString.call(t)},r=function(t){var e=!1,o=null,r=0,a={},s={mouseDragStart:function(t){a.dragStart&&a.dragStart.forEach(function(e){return e(o.getMousePosition(t))})},mouseDrag:function(t){1===r&&s.mouseDragStart(t),a.drag&&a.drag.forEach(function(e){return e(o.getMousePosition(t))}),r+=1,e=!0},mouseDragEnd:function(t){a.dragEnd&&a.dragEnd.forEach(function(e){return e(o.getMousePosition(t))})},mouseClick:function(t){a.click&&a.click.forEach(function(e){return e(o.getMousePosition(t))})},mouseDBClick:function(t){a.dbclick&&a.dbclick.forEach(function(e){return e(o.getMousePosition(t))})},mouseRightClick:function(t){a.rightClick&&a.rightClick.forEach(function(e){return e(o.getMousePosition(t))}),r=0},mouseWheel:function(t){a.wheel&&a.wheel.forEach(function(e){return e(t)})},mouseDown:function(t){t.preventDefault(),r+=1,window.addEventListener("mousemove",s.mouseDrag)}},l=function(){function t(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"[object String]"===n(i)?this.element=document.querySelector(i):this.element=i,function(){this.element.oncontextmenu=function(t){return a.rightClick&&3===t.which&&s.mouseRightClick(t),!1},this.element.addEventListener("mousedown",s.mouseDown),window.addEventListener("mouseup",function(t){t.preventDefault(),window.removeEventListener("mousemove",s.mouseDrag),e&&(s.mouseDragEnd(t),window.removeEventListener("mousemove",s.mouseDrag),e=!1),setTimeout(function(){1===r&&3!==t.which?s.mouseClick(t):2===r&&3!==t.which&&s.mouseDBClick(t),r=0},100)}),this.element.addEventListener("wheel",function(t){setTimeout(function(){s.mouseWheel&&s.mouseWheel(t)},1)})}.call(this),o=function(){var t=this.element,e=t.getBoundingClientRect(),o=e.left*(t.offsetWidth/e.width),i=e.top*(t.offsetHeight/e.height);return{getMousePosition:function(t){var e=t.pageX-o,n=t.pageY-i;return Object.assign(t,{canvasX:e,canvasY:n}),t}}}.call(this)}return function(t,e,o){e&&i(t.prototype,e)}(t,[{key:"on",value:function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];return Object.assign(a,function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},t,o)),this}}]),t}();return Object.assign(l.prototype,{getEvent:function(t){return a[t]?a[t]:[]}}),new l(t)},a="undefined"==typeof window?self:window;a.simpleEvent=r,a.$$=r,e.default=r}])},function(t,e,o){"use strict";o.r(e);var i=o(0),n=o.n(i),r=o(1),a=o.n(r),s=o(2),l=o.n(s),c=function(t){return Object.prototype.toString.call(t)},h=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this.setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this.setProperty(e[i])}}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.points,i=e.radius,n=void 0===i?10:i,r=e.bgColor,a=e.color,s=e.lineWidth,l=e.startAngle,c=void 0===l?0:l,h=e.endAngle,u=void 0===h?2*Math.PI:h,f=e.opacity;this.props.push({points:o,radius:n,startAngle:c,endAngle:u,style:{color:a,bgColor:r,lineWidth:s,opacity:f}})}},{key:"draw",value:function(){for(var t=this.context,e=this.props,o=this.propsLength,i=0;i<o;i+=1){var n=e[i],r=n.points,a=n.radius,s=n.startAngle,l=n.endAngle,c=n.style,h=r.length;t.save();var u=0;for(t.beginPath();u<h;u+=1){var f=r[u];this._setStyle(c),t.moveTo(Math.trunc(f[0]+a),Math.trunc(f[1])),t.arc(Math.trunc(f[0]),Math.trunc(f[1]),a,s,l)}t.stroke(),t.fill(),t.restore()}}},{key:"_setStyle",value:function(t){var e=this.context;e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over",e.globalAlpha=t.opacity?t.opacity:1}}]),t}(),u=function(){function t(e){n()(this,t),this.props=e,this.setProperty(e)}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.x,i=void 0===o?0:o,n=e.y,r=void 0===n?0:n,a=e.width,s=void 0===a?100:a,l=e.height,c=void 0===l?100:l,h=e.bgColor,u=e.color,f=e.lineWidth;this.x=i,this.y=r,this.width=s,this.height=c,this.style={color:u,bgColor:h,lineWidth:f}}},{key:"draw",value:function(){this._beginPath(),this._loadPath(),this._setDefaultStyle(),this._endPath()}},{key:"_beginPath",value:function(){this.context.beginPath()}},{key:"_loadPath",value:function(){var t=this.context;t.moveTo(this.x,this.y),t.rect(this.x,this.y,this.width,this.height),t.closePath()}},{key:"_endPath",value:function(){var t=this.context;t.fill(),t.stroke(),t.closePath()}},{key:"_setDefaultStyle",value:function(){var t=this.style,e=this.context;"Text"===this.className&&(e.textBaseline=t.textBaseline?t.textBaseline:"alphabetic",e.textAlign=t.textAlign?t.textAlign:"alphabetic",e.font="".concat(t.fontSize," ").concat(t.fontFamily)),e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over"}}]),t}(),f={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},p=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this._setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this._setProperty(e[i])}}return a()(t,[{key:"_setProperty",value:function(t){var e=t.points,o=t.color,i=t.lineWidth,n=t.arrow,r=t.lineType,a=t.isClose,s=void 0!==a&&a,l=t.opacity;this.props.push({arrow:n,arrowArr:[],points:e,isClose:s,lineType:r,style:{color:o,lineWidth:i,opacity:l}})}},{key:"drawArrow",value:function(t,e,o){var i,n,r=this.context,a=t[0],s=t[1],l=e[0],c=e[1],h=o.lineWidth?o.lineWidth+2:3,u=l,f=c,p=Math.atan2(c-s,l-a);r.beginPath(),i=1.2*h*Math.cos(p)+u,n=1.2*h*Math.sin(p)+f,r.moveTo(i,n),p+=2*Math.PI*.4,i=1.2*h*Math.cos(p)+u,n=1.2*h*Math.sin(p)+f,r.lineTo(i,n),p+=2*Math.PI*.2,i=1.2*h*Math.cos(p)+u,n=1.2*h*Math.sin(p)+f,r.lineTo(i,n),r.closePath(),r.fillStyle=o.color?o.color:"rgba(255,255,255,0)",r.fill()}},{key:"draw",value:function(){this._drawPath()}},{key:"_drawPath",value:function(){var t=this,e=this.context,o=this.props,i=this.propsLength,n=!0,r="",a=0;if(0!==i)for(var s=function(){var i=o[a],s=i.style,l=i.points,c=i.isClose,h=i.lineType,u=i.arrow,p=s.lineWidth,g=s.color,v=s.bgColor,y=l.length,d="".concat(g||"").concat(v||"").concat(p||"").concat(h||"");a>0&&(n=d===r),0===a?(e.save(),e.beginPath(),t._setStyle(s)):n?n&&e.beginPath():(e.stroke(),e.beginPath(),t._setStyle(s)),f[h]?e.setLineDash(f[h].map(function(t){return t*p})):e.setLineDash(f.solid);for(var b=0;b<y;b+=1){var m=l[b];0===b&&e.moveTo(Math.trunc(m[0]),Math.trunc(l[1])),e.lineTo(Math.trunc(m[0]),Math.trunc(m[1]))}if(c&&e.closePath(),e.stroke(),n||(r=d),u){var x=l[y-2],P=l[y-1];t.drawArrow(x,P,s)}};a<i;a+=1)s()}},{key:"_setStyle",value:function(t){var e=this.context;e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over",e.globalAlpha=t.opacity?t.opacity:1}}]),t}(),g=function(){function t(e){n()(this,t),this.props=e,this.setProperty(e)}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.from,i=e.mid,n=e.to,r=e.color;this.from=o,this.mid=i,this.to=n,this.style={color:r}}},{key:"draw",value:function(){this._beginPath(),this._loadPath(),this._setDefaultStyle(),this._endPath()}},{key:"_beginPath",value:function(){this.context.beginPath()}},{key:"_loadPath",value:function(){var t=this.from,e=t.x,o=t.y,i=this.mid,n=i.x,r=i.y,a=this.to,s=a.x,l=a.y,c=this.context;c.moveTo(e,o),c.quadraticCurveTo(n,r,s,l)}},{key:"_endPath",value:function(){var t=this.context;t.fill(),t.stroke(),t.closePath()}},{key:"_setDefaultStyle",value:function(){var t=this.style,e=this.context;"Text"===this.className&&(e.textBaseline=t.textBaseline?t.textBaseline:"alphabetic",e.textAlign=t.textAlign?t.textAlign:"alphabetic",e.font="".concat(t.fontSize," ").concat(t.fontFamily)),e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over"}}]),t}(),v=function(){function t(e){n()(this,t),this.props=e,this.setProperty(e)}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.from,i=e.mid1,n=e.mid2,r=e.to,a=e.color;e.bgColor;this.from=o,this.mid1=i,this.mid2=n,this.to=r,this.style={color:a}}},{key:"draw",value:function(){this._drawBezierCurve()}},{key:"_drawBezierCurve",value:function(){var t=this.context,e=this.from,o=e.x,i=e.y,n=this.mid1,r=n.x,a=n.y,s=this.mid2,l=s.x,c=s.y,h=this.to,u=h.x,f=h.y;t.save(),t.beginPath(),this._setStyle(),t.moveTo(Math.trunc(o),Math.trunc(i)),t.bezierCurveTo(Math.trunc(r),Math.trunc(a),Math.trunc(l),Math.trunc(c),Math.trunc(u),Math.trunc(f)),t.closePath(),t.stroke(),t.fill()}},{key:"_setStyle",value:function(){var t=this.style,e=this.context;"Text"===this.className&&(e.textBaseline=t.textBaseline?t.textBaseline:"alphabetic",e.textAlign=t.textAlign?t.textAlign:"alphabetic",e.font="".concat(t.fontSize," ").concat(t.fontFamily)),e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over"}}]),t}(),y=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this.setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this.setProperty(e[i])}}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.x,i=e.y,n=e.text,r=e.maxWidth,a=e.color,s=e.bgColor,l=e.font,c=e.textAlign,h=e.textBaseline,u=e.lineWidth,f=e.lineHeight,p=e.wordBreak,g=void 0!==p&&p,v=e.rad,y=e.angle,d=e.opacity;this.props.push({x:o,y:i,text:n,maxWidth:r,wordBreak:g,rad:v,angle:y,style:{color:a,bgColor:s,font:l,textAlign:c,textBaseline:h,lineWidth:u,lineHeight:f,opacity:d}})}},{key:"_drawText",value:function(){for(var t=this.context,e=this.props,o=this.propsLength,i=0;i<o;i+=1){var n=e[i],r=n.x,a=n.y,s=n.style,l=n.text,c=n.wordBreak,h=n.rad;if(t.save(),t.beginPath(),this._setStyle(s),t.rotate(h||0),c)for(var u=s.lineHeight,f=l.split(" "),p=+a,g=0;g<f.length;g+=1)t.strokeText(f[g],r,p),t.fillText(f[g],r,p),p+=+u;else t.strokeText(l,r,a),t.fillText(l,r,a);t.restore()}}},{key:"draw",value:function(){this._drawText()}},{key:"_setStyle",value:function(t){var e=this.context;e.textBaseline=t.textBaseline?t.textBaseline:"alphabetic",e.textAlign=t.textAlign?t.textAlign:"alphabetic",e.font="".concat(t.font),e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over",e.globalAlpha=t.opacity?t.opacity:1}}]),t}(),d=function(){function t(e,o){n()(this,t),this.features=e,this.style=o}return a()(t,[{key:"draw",value:function(){this.context;var t=this.canvas;this.features.forEach(function(e){Object.assign(e,{canvas:t,context:t.getContext("2d")}),console.log(e.draw),e.draw()})}},{key:"className",get:function(){return this.constructor.name}}]),t}(),b={solid:[],dot:[1,2],broken:[7,2],chain1:[7,2,2,2],chain2:[2,2,2,2,7,2]},m=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this._setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this._setProperty(e[i])}}return a()(t,[{key:"_setProperty",value:function(t){var e=t.points,o=t.color,i=t.bgColor,n=t.globalCompositeOperation,r=t.lineWidth,a=t.lineType,s=t.holes,l=t.isClose,c=void 0===l||l,h=t.opacity;this.props.push({points:e,isClose:c,lineType:a,holes:s,style:{color:o,bgColor:i,lineWidth:r,globalCompositeOperation:n,opacity:h}})}},{key:"_drawPolygon",value:function(){for(var t=this,e=this.context,o=this.props,i=this.propsLength,n=!0,r="",a=0,s=function(){var s=o[a],l=s.points,c=s.style,h=s.isClose,u=s.lineType,f=s.holes,p=c.lineWidth,g=c.color,v=c.bgColor,y=l.length,d="".concat(g||"").concat(v||"").concat(p||"").concat(u||"");a>0&&(n=d===r),0===a?(e.save(),e.beginPath(),t._setStyle(Object.assign(c,{isClose:h}))):n||(e.stroke(),e.fill(),e.beginPath(),t._setStyle(Object.assign(c,{isClose:h}))),b[u]?e.setLineDash(b[u].map(function(t){return t*p})):e.setLineDash(b.solid);for(var m=0;m<y;m+=1){var x=l[m];0===m&&e.moveTo(Math.trunc(x[0]),Math.trunc(x[1])),e.lineTo(Math.trunc(x[0]),Math.trunc(x[1]))}if(h&&e.closePath(),f&&f.length>0)for(var P=f.length,k=0;k<P;k+=1){for(var C=f[k],w=C.length,S=0;S<w;S+=1){var _=C[S];0===S&&e.moveTo(Math.trunc(_[0]),Math.trunc(_[1])),e.lineTo(Math.trunc(_[0]),Math.trunc(_[1]))}e.closePath()}a===i-1?(e.stroke(),e.fill(),e.restore()):n||(e.stroke(),e.fill(),r=d,e.beginPath())};a<i;a+=1)s()}},{key:"draw",value:function(){this._drawPolygon()}},{key:"_setStyle",value:function(t){var e=this.context;e.fillStyle=t.bgColor&&t.isClose?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:1,e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over",e.globalAlpha=t.opacity?t.opacity:1}}]),t}(),x=function(t,e,o){var i=e.map(function(){return 0});i=function(t,e,o){for(var i=t.length-1,n=function(t,e){for(var o=[],i=0;i<t;i++){o.push([]);for(var n=0;n<e;n++)o[i].push(0)}return o}(i+1,i+2),r=1;r<i;r++)n[r][r-1]=1/(t[r]-t[r-1]),n[r][r]=2*(1/(t[r]-t[r-1])+1/(t[r+1]-t[r])),n[r][r+1]=1/(t[r+1]-t[r]),n[r][i+1]=3*((e[r]-e[r-1])/((t[r]-t[r-1])*(t[r]-t[r-1]))+(e[r+1]-e[r])/((t[r+1]-t[r])*(t[r+1]-t[r])));return n[0][0]=2/(t[1]-t[0]),n[0][1]=1/(t[1]-t[0]),n[0][i+1]=3*(e[1]-e[0])/((t[1]-t[0])*(t[1]-t[0])),n[i][i-1]=1/(t[i]-t[i-1]),n[i][i]=2/(t[i]-t[i-1]),n[i][i+1]=3*(e[i]-e[i-1])/((t[i]-t[i-1])*(t[i]-t[i-1])),function(t,e){for(var o=t.length,i=0;i<o;i++){for(var n=0,r=Number.NEGATIVE_INFINITY,a=i;a<o;a++)t[a][i]>r&&(n=a,r=t[a][i]);P(t,i,n);for(var a=i+1;a<o;a++){for(var s=i+1;s<o+1;s++)t[a][s]=t[a][s]-t[i][s]*(t[a][i]/t[i][i]);t[a][i]=0}}for(var a=o-1;a>=0;a--){var l=t[a][o]/t[a][a];e[a]=l;for(var s=a-1;s>=0;s--)t[s][o]-=t[s][a]*l,t[s][a]=0}return e}(n,o)}(e,o,i);for(var n=1;e[n]<t;)n++;var r=(t-e[n-1])/(e[n]-e[n-1]),a=i[n-1]*(e[n]-e[n-1])-(o[n]-o[n-1]),s=-i[n]*(e[n]-e[n-1])+(o[n]-o[n-1]);return(1-r)*o[n-1]+r*o[n]+r*(1-r)*(a*(1-r)+s*r)};function P(t,e,o){var i=t[e];t[e]=t[o],t[o]=i}var k=function(){function t(e){n()(this,t),this.props=e,this.setProperty(e)}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.route,i=e.color,n=e.lineWidth,r=e.resolution;this.route=o,this.resolution=r,this.style={color:i,lineWidth:n}}},{key:"draw",value:function(){this._beginPath(),this._loadPath(),this._setStyle(),this._endPath()}},{key:"_beginPath",value:function(){this.context.beginPath()}},{key:"_loadPath",value:function(){var t=this.context;t.moveTo(Math.trunc(this.route[0][0]),Math.trunc(this.route[0][1]));for(var e=this.route.length,o=this.route.map(function(t){return Math.trunc(t[0])}),i=this.route.map(function(t){return Math.trunc(t[1])}),n=this.route[0][0];n<=this.route[e-1][0];n+=this.resolution)t.lineTo(n,x(n,o,i))}},{key:"_endPath",value:function(){var t=this.context;t.fill(),t.stroke(),t.closePath()}},{key:"_setStyle",value:function(){var t=this.style,e=this.context;"Text"===this.className&&(e.textBaseline=t.textBaseline?t.textBaseline:"alphabetic",e.textAlign=t.textAlign?t.textAlign:"alphabetic",e.font="".concat(t.fontSize," ").concat(t.fontFamily)),e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over"}}]),t}(),C=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this.setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this.setProperty(e[i])}}return a()(t,[{key:"setProperty",value:function(t){var e=t||this.props,o=e.x,i=void 0===o?0:o,n=e.y,r=void 0===n?0:n,a=e.image,s=e.offsetX,l=void 0===s?0:s,c=e.offsetY,h=void 0===c?0:c;this.props.push({x:i,y:r,image:a,offsetX:l,offsetY:h})}},{key:"draw",value:function(){for(var t=this.context,e=this.props,o=this.propsLength,i=0;i<o;i+=1){var n=e[i],r=n.x,a=n.y,s=n.image,l=n.offsetX,c=n.offsetY;t.save(),t.drawImage(s,r+l,a+c),t.restore()}}}]),t}(),w=function(){function t(e){if(n()(this,t),this.props=[],"[object Object]"===c(e))this.propsLength=1,this.setProperty(e);else if("[object Array]"===c(e)){var o=e.length;this.propsLength=o;for(var i=0;i<o;i+=1)this.setProperty(e[i])}}return a()(t,[{key:"draw",value:function(){for(var t=this.context,e=this.props,o=this.propsLength,i=0;i<o;i+=1){var n=e[i],r=n.points,a=n.style,s=n.angle,l=a.lineWidth?a.lineWidth+2:3,c=r.length;t.beginPath();for(var h=0,u=0,f=0;h<c;h+=1){var p=(s-90)*(Math.PI/180),g=r[h],v=g[0],y=g[1];u=1.2*l*Math.cos(p)+v,f=1.2*l*Math.sin(p)+y,t.moveTo(u,f),p+=2*Math.PI*.4,u=1.2*l*Math.cos(p)+v,f=1.2*l*Math.sin(p)+y,t.lineTo(u,f),p+=2*Math.PI*.2,u=1.2*l*Math.cos(p)+v,f=1.2*l*Math.sin(p)+y,t.lineTo(u,f),t.closePath(),t.fillStyle=a.color?a.color:"rgba(255,255,255,0)",t.fill()}}}},{key:"setProperty",value:function(t){var e=t||this.props,o=e.points,i=e.color,n=e.angle,r=e.lineWidth;this.props.push({points:o,angle:n,style:{color:i,lineWidth:r}})}},{key:"_setStyle",value:function(t){var e=this.context;e.fillStyle=t.bgColor?t.bgColor:"rgba(255,255,255,0)",e.strokeStyle=t.color?t.color:"rgba(255,255,255,0)",e.lineWidth=t.lineWidth?t.lineWidth:"1",e.globalCompositeOperation=t.globalCompositeOperation?t.globalCompositeOperation:"source-over",e.globalAlpha=t.opacity?t.opacity:1}}]),t}(),S=function(){function t(e,o){n()(this,t),"[object String]"===c(e)?this.canvas=document.querySelector(e):this.canvas=e,this.selector=e,this.context=this.canvas.getContext("2d"),this.zoom=0,this.selection=null,this.featureQueue=[],this.activeEvent="[object Boolean]"!==c(o)||o,this.eventHandler=null,this.activeEvent&&(this.eventHandler=l()(e))}return a()(t,[{key:"init",value:function(){this.featureQueue.forEach(function(t){t.setProperty()})}},{key:"add",value:function(t){this.featureQueue.push(t)}},{key:"draw",value:function(){var t=this.featureQueue,e=this.canvas;t.forEach(function(t){"[object Array]"===c(t)?t.forEach(function(t){Object.assign(t,{canvas:e,context:e.getContext("2d")}),t.draw()}):(Object.assign(t,{canvas:e,context:e.getContext("2d")}),t.draw())})}},{key:"group",value:function(t,e){var o=new d(t,e);this.featureQueue.push(o)}},{key:"clear",value:function(){var t=this.context,e=this.canvas;t.clearRect(0,0,e.width,e.height)}},{key:"delete",value:function(t){this.featureQueue=t?this.featureQueue.filter(function(e){return e!==t}):[]}},{key:"reDraw",value:function(){this.clear(),this.draw()}},{key:"on",value:function(t,e){return this.eventHandler&&this.eventHandler.on(t,e),this.eventHandler}}]),t}();S.Arc=h,S.Rect=u,S.Path=p,S.QuadraticCurve=g,S.BezierCurve=v,S.Text=y,S.Polygon=m,S.SmoothCurve=k,S.Image=C,S.Arrow=w,("undefined"==typeof window?self:window).Dali=S;var _=S;e.default=_}])});